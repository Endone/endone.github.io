---
layout: post
title: Windows中的不同的CMD显示不同的PATH环境变量
---

今天，在跑一个Java程序的时候发现Java的版本1.8太高了，需要降到1.7，所以装了一下1.7，然后改了一下环境变量，打开一个CMD java -version试了一下，没有问题，版本已经切过来了，但是默认程序还是无法打开，提示找不到javaw命令，然后在程序所在目录打开一个CMD看了一下PATH，结果发现PATH还是老的。
这里的问题有两个：
* Java程序是通过bat文件启动的，因为需要加入一些启动参数；
* CMD进程和文件夹(资源管理器 explorer.exe)是有父子进程关系的，所以从目录内部直接启动的CMD会继承explorer.exe的环境变量，而进程的环境变量都是在启动的时候一次性读取并且不支持实时更新的；

有了上边的说明之后，解决方法就很明显了：关闭文件夹，重新打开目录(explorer.exe)然后双击bat就可以启动Java程序了。